            if rsi < 30 and sma_diff_ratio > -0.003:
                signal, score = "BUY", total_score